## ES6çš„æ¨¡å—åŒ–ä»‹ç»åŠä½¿ç”¨å‡†å¤‡

> æœ€æ–°çš„å®˜æ–¹çš„æ¨¡å—åŒ–æ ‡å‡†ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¯ä»¥ä½¿ç”¨ï¼Œä¹‹åå’±ä»¬åŸºæœ¬ä¸Šæ¨¡å—åŒ–çš„è¯­æ³•ç”¨çš„éƒ½æ˜¯è¿™ä¸ª
>
> [ä¼ é€é—¨:mdn-import](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import)
>
> [ä¼ é€é—¨:mdn-export](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/export)



åœ¨ `ES6` æ¨¡å—åŒ–è§„èŒƒè¯ç”Ÿä¹‹å‰ï¼Œ`JavaScript` ç¤¾åŒºå·²ç»å°è¯•å¹¶æå‡ºäº†`AMD`ã€`CMD`ã€`CommonJS` ç­‰æ¨¡å—åŒ–è§„èŒƒã€‚

ä½†æ˜¯ï¼Œè¿™äº›ç”±ç¤¾åŒºæå‡ºçš„æ¨¡å—åŒ–æ ‡å‡†ï¼Œè¿˜æ˜¯å­˜åœ¨ä¸€å®šçš„å·®å¼‚æ€§ä¸å±€é™æ€§ã€å¹¶ä¸æ˜¯æµè§ˆå™¨ä¸æœåŠ¡å™¨é€šç”¨çš„æ¨¡å—åŒ– æ ‡å‡†ï¼Œä¾‹å¦‚ï¼š

- `AMD` å’Œ `CMD` é€‚ç”¨äºæµè§ˆå™¨ç«¯çš„ `Javascript` æ¨¡å—åŒ–
- `CommonJS` é€‚ç”¨äºæœåŠ¡å™¨ç«¯çš„ `Javascript` æ¨¡å—åŒ–

å¤ªå¤šçš„æ¨¡å—åŒ–è§„èŒƒç»™å¼€å‘è€…å¢åŠ äº†**å­¦ä¹ çš„éš¾åº¦ä¸å¼€å‘çš„æˆæœ¬**ã€‚å› æ­¤ï¼Œå®˜æ–¹çš„`ES6` æ¨¡å—åŒ–è§„èŒƒè¯ç”Ÿäº†ï¼

ä¹‹åå‰åç«¯å¼€å‘ï¼Œåªè¦æ˜¯ç”¨åˆ°äº†`js`çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨`ES6`çš„æ¨¡å—åŒ–ï¼Œå¼€å‘è€…ä¸éœ€å†é¢å¤–å­¦ä¹  AMDã€CMD æˆ– CommonJS ç­‰æ¨¡å—åŒ–è§„èŒƒã€‚





1. æ¯ä¸ª js æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—

2. å¯¼å…¥å…¶å®ƒæ¨¡å—æˆå‘˜ä½¿ç”¨ `import`  å…³é”®å­—

3. å‘å¤–å…±äº«æ¨¡å—æˆå‘˜ä½¿ç”¨ `export` å…³é”®å­— 

4. `Node.js`ä½¿ç”¨å‡†å¤‡

   1. `package.json`ä¸­çš„`type`å±æ€§æ”¹ä¸º`module`

   2. å®‰è£…çš„`node`ç‰ˆæœ¬å¤§äºç­‰äº`13.0`

      ```json
      {
        "name": "01.coding",
        "version": "1.0.0",
        "type": "module",
        "description": "",
        "main": "01.ES6çš„æ¨¡å—åŒ–.js",
        "scripts": {
          "test": "echo \"Error: no test specified\" && exit 1"
        },
        "author": "",
        "license": "ISC"
      }
      
      ```





## ES6æ¨¡å—è¯­æ³•-é»˜è®¤çš„å¯¼å‡ºå’Œå¯¼å…¥

> æ¥ä¸‹æ¥å’±ä»¬æ¥å­¦ä¹ ES6æ¨¡å—åŒ–ä¸­çš„é»˜è®¤å¯¼å‡ºå’Œå¯¼å…¥

### è¯­æ³•:

1. å¯¼å‡ºï¼š `export default é»˜è®¤å¯¼å‡ºçš„æˆå‘˜`
2. å¯¼å…¥ï¼š `import æ¥æ”¶åç§° from 'æ¨¡å—'`



### å‚è€ƒä»£ç :

1. å¯¼å‡º

```javascript
const food = 'è¥¿å…°èŠ±'
const dogs = ['å“ˆå£«å¥‡', 'è¨æ‘©è€¶']
const stu = {
  name: 'æé›·',
  friend: 'éŸ©æ¢…æ¢…',
}

function sayHi(name = 'rose') {
  console.log(`${name}ä½ å¥½å‘€ï¼`)
}

// æš´éœ²ä¸€ä¸ªå‡ºå»
// export default food
// éƒ½æš´éœ²å‡ºå»
// export default åªèƒ½å†™ä¸€æ¬¡
export default {
  food,
  dogs,
  stu,
  sayHi,
}

```

2. å¯¼å…¥

```javascript
// é»˜è®¤å¯¼å…¥æ—¶çš„æ¥æ”¶åç§°å¯ä»¥ä»»æ„åç§°ï¼Œåªè¦æ˜¯åˆæ³•çš„æˆå‘˜åç§°å³å¯
import result from './xxx.js'
console.log(result)
```





## ES6æ¨¡å—åŒ–è¯­æ³• - æŒ‰éœ€å¯¼å‡ºå’Œå¯¼å…¥

> æ¥ä¸‹æ¥å’±ä»¬æ¥å­¦ä¹ å¦‚ä½•æŒ‰éœ€çš„å¯¼å‡ºå’Œå¯¼å…¥



### è¯­æ³•

1. æŒ‰éœ€å¯¼å‡ºçš„è¯­æ³•ï¼š `export const s1 = 10`

```javascript
// æŒ¨ä¸ªå¯¼å‡º
const food = 'è¥¿å…°èŠ±'
const dogs = ['å“ˆå£«å¥‡', 'è¨æ‘©è€¶']
const stu = {
  name: 'æé›·',
  friend: 'éŸ©æ¢…æ¢…',
}

function sayHi(name = 'rose') {
  console.log(`${name}ä½ å¥½å‘€ï¼`)
}

// æˆ–è€… ç»Ÿä¸€å¯¼å‡º
export { food, dogs, stu, sayHi }

// å¯ä»¥å’Œexport defaultä¸€èµ·ä½¿ç”¨
const info = 'æ„Ÿè§‰è‡ªå·±èŒèŒå“’'
export default info

```

2. æŒ‰éœ€å¯¼å…¥çš„è¯­æ³•ï¼š `import { æŒ‰éœ€å¯¼å…¥çš„åç§° } from 'æ¨¡å—æ ‡è¯†ç¬¦'`
3. å¯ä»¥ä½¿ç”¨`as`èµ·åˆ«åï¼š
   1. `import { æŒ‰éœ€å¯¼å‡ºçš„åç§° as åˆ«å } from './modules/02.æŒ‰éœ€å¯¼å‡º.js'`

```javascript
// å¯¼å…¥
import { food } from './modules/02.æŒ‰éœ€å¯¼å‡º.js'
console.log('food:', food)
// å¯¼å…¥ + èµ·åˆ«å
import { food as fd } from './modules/02.æŒ‰éœ€å¯¼å‡º.js'
console.log('fd:', fd)

// å¯¼å…¥export defaultçš„å†…å®¹
import result from './modules/02.æŒ‰éœ€å¯¼å‡º.js'
console.log('result:', result)

// é»˜è®¤å¯¼å…¥å¯ä»¥å’Œ æŒ‰éœ€å¯¼å…¥ä¸€èµ·ä½¿ç”¨
import result, { food } from './modules/02.æŒ‰éœ€å¯¼å‡º.js'

```



## ES6æ¨¡å—åŒ–è¯­æ³• - å…¨éƒ¨å¯¼å…¥

> å¦‚æœæƒ³è¦ä¸€æ¬¡æ€§å¯¼å…¥æ‰€æœ‰çš„å†…å®¹ï¼Œè¿˜æœ‰ä¸€ç§è¯­æ³•å“¦



### è¯­æ³•ï¼š

1. `* as` æ˜¯å›ºå®šè¯­æ³•
2. `myModule`æ˜¯èµ·çš„åå­—ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚è°ƒæ•´
3. ä¹‹åé€šè¿‡`myModule`ç‚¹å‡ºéœ€è¦çš„å†…å®¹å³å¯

```javascript
import * as myModule from '/modules/my-module.js';
```















## ES6æ¨¡å—åŒ–è¯­æ³• - ç›´æ¥å¯¼å…¥

> æœ‰æ—¶å€™æˆ‘ä»¬åªå¸Œæœ›æ‰§è¡ŒæŸä¸ªæ¨¡å—ä¸­çš„ä»£ç ï¼Œå¹¶ä¸éœ€è¦å¾—åˆ°æ¨¡å—ä¸­å‘å¤–å…±äº«çš„æˆå‘˜ï¼Œå¯ä»¥é€‰æ‹©ç›´æ¥å¯¼å…¥

### è¯­æ³•

1. `import 'æ¨¡å—çš„è·¯å¾„'`

   1. æ¨¡å—çš„ä»£ç 

      ```javascript
      // æ–‡ä»¶å xxx.js
      for (let i = 0; i < 10; i++) {
        console.log(i)
      }
      
      ```

   2. å¯¼å…¥çš„è¯­æ³•

      ```javascript
      import 'xxx.js'
      // å³å¯çœ‹åˆ°å¾ªç¯è¾“å‡ºçš„å†…å®¹
      ```

      

      

### å°ç»“

1. è¿™ä¸ªè¯­æ³•å¹¶ä¸èƒ½è·å–æ¨¡å—å†…çš„æˆå‘˜`import 'æ¨¡å—çš„è·¯å¾„'`ï¼Œä½œç”¨æ˜¯?







## ES6æ¨¡å—åŒ–è¯­æ³• - æµè§ˆå™¨ç«¯ä½¿ç”¨

> åˆ°ç›®å‰ä¸ºæ­¢æµ‹è¯•çš„ç¯å¢ƒåŸºæœ¬éƒ½æ˜¯`Node.js`ï¼Œä½†æ˜¯ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œå’±ä»¬ç¼–å†™çš„ä»£ç å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿è¡Œçš„ä¸ºæ­¢æ˜¯æµè§ˆå™¨ï¼Œåˆšåˆšå­¦ä¹ çš„`ES6`çš„æ¨¡å—åŒ–è¯­æ³•ï¼Œåœ¨æµè§ˆå™¨ä¸­å¯ä»¥ä½¿ç”¨å—ï¼Ÿ
>
> [ä¼ é€é—¨ï¼šMDN-import](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import)

### è¯­æ³•ï¼š

1. `script`æ ‡ç­¾è®¾ç½®`type=module`
2. å†…éƒ¨å†™`ES6`çš„`import`è¯­æ³•å³å¯

```html
<script type="module">
  // é»˜è®¤å¯¼å…¥
  import myTool from './modules/myModule.js'
  // ä¸Šé¢å­¦ä¹ çš„æ‰€æœ‰è¯­æ³•éƒ½å¯ä»¥ä½¿ç”¨å“¦
</script>
```



### å…¼å®¹æ€§

1. åˆ°äº†å¤§å®¶æœ€å…³å¿ƒçš„å…¼å®¹æ€§é—®é¢˜å•¦
2. `IE`ä¸€éª‘ç»å°˜ã€‚ã€‚ã€‚ã€‚ï¼Œå…¶ä»–çš„æ–°å¼æµè§ˆå™¨æ•´ä½“éƒ½æ¯”è¾ƒOK

![image-20220325101141356](D:/HeiMa/%E6%8E%A5%E6%94%B6%E6%96%87%E4%BB%B6/%E5%B0%B1%E4%B8%9A%E7%8F%AD/11-nodeJS/Node.js-day04/01-%E6%95%99%E5%AD%A6%E8%B5%84%E6%96%99/assets/image-20220325101141356.png)







## å‰ç«¯å·¥ç¨‹åŒ– 

> æ¥ä¸‹æ¥å’±ä»¬æ¥å­¦ä¹ ä¸€ä¸ªæ¯”è¾ƒæ—¶é«¦çš„è¯äº†ï¼Œå‰ç«¯å·¥ç¨‹åŒ–ï¼Œå¸Œæœ›å¤§ä¼™å¬å®Œä¹‹åå¯ä»¥è½¬å˜å¯¹äºå‰ç«¯å¼€å‘çš„è®¤çŸ¥,äº†è§£ä¼ä¸šä¸­æ˜¯å¦‚ä½•è¿›è¡Œå‰ç«¯å¼€å‘çš„

### ç›®æ ‡ï¼š

1. è½¬å˜å¯¹äºå‰ç«¯å¼€å‘çš„è®¤çŸ¥
2. äº†è§£ä¼ä¸šä¸­æ˜¯å¦‚ä½•è¿›è¡Œå‰ç«¯å¼€å‘çš„



### å‰ç«¯å¼€å‘ç°åœ¨çš„æ ·å­

- å‰ç«¯å°ç™½çœ¼ä¸­çš„å‰ç«¯å¼€å‘ï¼š 
  - â‘  ä¼šå†™ HTML + CSS + JavaScript å°±æ˜¯åˆæ ¼çš„å‰ç«¯ç¨‹åºå‘˜ 
  - â‘¡ ä¸œæ‹¼è¥¿å‡‘ï¼Œä¸æˆä½“ç³» 
- å®é™…çš„å‰ç«¯å¼€å‘ï¼ˆå››ä¸ªç°ä»£åŒ–ï¼‰ï¼š 
  - â‘  æ¨¡å—åŒ–ï¼ˆjs çš„æ¨¡å—åŒ–ã€css çš„æ¨¡å—åŒ–ã€èµ„æºçš„æ¨¡å—åŒ–ï¼‰ 
  - â‘¡ ç»„ä»¶åŒ–ï¼ˆå¤ç”¨ç°æœ‰çš„ UI ç»“æ„ã€æ ·å¼ã€è¡Œä¸ºï¼‰ 
  - â‘¢ è§„èŒƒåŒ–ï¼ˆç›®å½•ç»“æ„çš„åˆ’åˆ†ã€ç¼–ç è§„èŒƒåŒ–ã€æ¥å£è§„èŒƒåŒ–ã€æ–‡æ¡£è§„èŒƒåŒ–ã€ Git åˆ†æ”¯ç®¡ç†ï¼‰ 
  - â‘£ è‡ªåŠ¨åŒ–ï¼ˆè‡ªåŠ¨åŒ–æ„å»ºã€è‡ªåŠ¨éƒ¨ç½²ã€è‡ªåŠ¨åŒ–æµ‹è¯•ï¼‰



### ä¸ºä»€ä¹ˆ

- å·¥ç¨‹åŒ–æä¾›äº†ä¸€å¥—æ ‡å‡†çš„å¼€å‘æ–¹æ¡ˆå’Œæµç¨‹ï¼Œè®©å‰ç«¯å¼€å‘è‡ªæˆä½“ç³» ã€‚
- é€šè¿‡è§„èŒƒå’Œå·¥å…·æ¥æé«˜å‰ç«¯åº”ç”¨è´¨é‡åŠå¼€å‘æ•ˆç‡
- è®©å¼€å‘è€…å¯ä»¥æ›´ä¸“æ³¨äºç¼–ç ï¼Œè€Œä¸ç”¨ä¸ºå„ç§é…ç½®ï¼Œå…¼å®¹ï¼Œç­‰ç¹ççš„äº‹æƒ…å›°æ‰°



### è§£å†³æ–¹æ¡ˆï¼š

- æ—©æœŸçš„å‰ç«¯å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆï¼š
  - gruntï¼ˆ https://www.gruntjs.net/ ï¼‰ 
  - gulpï¼ˆ https://www.gulpjs.com.cn/ ï¼‰ 
- ç›®å‰ä¸»æµçš„å‰ç«¯å·¥ç¨‹åŒ–è§£å†³æ–¹æ¡ˆï¼š 
  - **webpack**ï¼ˆ https://www.webpackjs.com/ ï¼‰
  - parcelï¼ˆ https://zh.parceljs.org/ ï¼‰ 
- å’±ä»¬ä¸»è¦å­¦ä¹ `webpack`ï¼Œåé¢çš„é¡¹ç›®ä¸­ä¸»è¦ç”¨åˆ°çš„ä¹Ÿæ˜¯`webpack`







### å°ç»“ï¼š

1. ç°åœ¨çš„å‰ç«¯å¼€å‘ï¼Œåªæœ‰`html`ï¼Œ`css`ï¼Œ`js`å—ï¼Ÿ
2. å‰ç«¯å·¥ç¨‹åŒ–çš„ç›®çš„æ˜¯é€šè¿‡è§„èŒƒå’Œå·¥å…·æ¥æé«˜å‰ç«¯åº”ç”¨è´¨é‡åŠ`_____`?





## webpackç®€ä»‹

> æ¥ä¸‹æ¥å’±ä»¬æ¥å­¦ä¹ ï¼Œåœ¨å‰ç«¯å·¥ç¨‹åŒ–ä¸­æ‰®æ¼”é‡è¦è§’è‰²çš„`webpack`
>
> [ä¼ é€é—¨ï¼šwebpackå®˜æ–¹æ–‡æ¡£](https://www.webpackjs.com/)
>
> [ä¼ é€é—¨ï¼šå‰ç«¯å·¥ç¨‹åŒ–é‚£äº›äº‹-æ˜é‡‘](https://juejin.cn/post/6844904132512317453#heading-6)

### ç›®æ ‡

1. äº†è§£`webpack`çš„æ¦‚å¿µ
2. äº†è§£`webpack`çš„ä½œç”¨







### ä»‹ç»

![image-20220325152913809](https://gitee.com/westblueflower/imgs/raw/master/img/202203271650226.png)

1. `webpack`æ˜¯åŸºäº`Node.js`å¼€å‘çš„å‰ç«¯æ‰“åŒ…å·¥å…·
2. ä¸€å›¾èƒœåƒè¨€
   1. è¯»å–é¡¹ç›®ä¸­å„ä¸ªæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œå¯¹è¿™äº›æ¨¡å—è¿›è¡Œå‹ç¼©ï¼Œåˆå¹¶
   2. å°†æµè§ˆå™¨æ— æ³•ç›´æ¥è¯†åˆ«çš„æ¨¡å—(`less,sass,ts`)è½¬æ¢ä¸ºæµè§ˆå™¨å¯ä»¥è¯†åˆ«çš„å†…å®¹
   3. å°†ä¸€äº›å› ä¸ºç‰ˆæœ¬é—®é¢˜æµè§ˆå™¨æ— æ³•æ”¯æŒçš„è¯­æ³•ï¼Œè½¬åŒ–ä¸ºæµè§ˆå™¨å¯ä»¥æ”¯æŒçš„æ ¼å¼
3. é€šè¿‡é…ç½®ï¼Œä¹Ÿå¯ä»¥åœ¨å¼€å‘é˜¶æ®µä¸ºæˆ‘ä»¬æä¾›å¾ˆå¤šä¾¿åˆ©çš„è‡ªåŠ¨åŒ–æ“ä½œ
4. æ¥ä¸‹æ¥çš„é…ç½®ä¸»è¦åˆ†ä¸º2ä¸ªéƒ¨åˆ†ï¼š
   1. å¼€å‘é˜¶æ®µè‡ªåŠ¨åŒ–é…ç½®
   2. é¡¹ç›®æ‰“åŒ…å‘å¸ƒ









### å°ç»“:

1. `webpack`æ˜¯åŸºäºä»€ä¹ˆå¼€å‘çš„ï¼Ÿ

2. `webpack`æ˜¯ä¸€ä¸ªå‰ç«¯ä»€ä¹ˆå·¥å…·ï¼Ÿ

3. **æ³¨æ„ï¼š**

   1. webpackçš„ä½¿ç”¨å’Œé…ç½®è¾ƒä¸ºç¹ç

   2. ä¸åŒçš„ç‰ˆæœ¬æ›´è¿­ä¼šé€ æˆé…ç½®çš„æ›´æ”¹ï¼Œæœ‰ä¸€äº›å°‘å‘

   3. ä»Šå¤©çš„å­¦ä¹ ï¼Œç†è§£ä½œç”¨ä¸ºä¸»

      1. èƒ½å¤Ÿè·Ÿç€æ•™ç¨‹å®Œæˆæ­å»ºå°±æ›´æ£’æ£’å“’

   4. åç»­çš„å­¦ä¹ ä¸­ï¼ŒåŒ…æ‹¬å·¥ä½œä¸­ä¼šä½¿ç”¨è„šæ‰‹æ¶å·¥å…·ï¼Œæ˜¯åŸºäº`webpack`æ­å»ºçš„

   5. ä»Šå¤©å­¦ä¹ æœ€åŸºæœ¬çš„é…ç½®ï¼Œé¡¹ç›®ä¸­å¸¸ç”¨çš„é…ç½®ä¼šåœ¨åç»­è¯¾ç¨‹ä¸­é™†ç»­è¡¥å……

      



## ä½“éªŒä¸€ä¸‹

> ä¸ºäº†æ›´å¥½çš„æ„Ÿå—é€šè¿‡webpackæ­å»ºçš„è‡ªåŠ¨åŒ–ç¯å¢ƒï¼Œå‡†å¤‡å¥½äº†ä¸€ä¸ªæ­å»ºå®Œæ¯•çš„ç‰ˆæœ¬
>
> 

### ç›®æ ‡ï¼š

1. æŠŠä½“éªŒé¡¹ç›®å…‹éš†åˆ°æœ¬åœ°
2. ä½“éªŒä¸€ä¸‹å…¨æ–°çš„å¼€å‘æ–¹å¼



### æ­¥éª¤ï¼š

1. æŠŠæ­å»ºå¥½çš„æ¨¡æ¿å…‹éš†åˆ°æœ¬åœ°ï¼š

   ```bash
   git clone https://gitee.com/westblueflower/webpack-lesson.git
   git checkout master
   ```

2. ä¸‹è½½ä¾èµ–çš„åŒ…:

   ```bash
   npm i 
   ```

3. è¿è¡Œèµ·æ¥ï¼š

   ```bash
   npm run serve
   ```

4. è°ƒæ•´`/src`ç›®å½•ä¸‹çš„æ–‡ä»¶å¹¶ç¡®è®¤æ•ˆæœ

   1. `index.js`
   2. `.less`
   3. `.css`
   4. ...





### å°ç»“ï¼š

1. åˆšåˆšä½“éªŒçš„é¡¹ç›®ä¸­ï¼Œ`less`çš„è§£æï¼Œæµè§ˆå™¨çš„è‡ªåŠ¨åˆ·æ–°ç­‰éƒ½é€šè¿‡webpackæå®šäº†





### æ³¨æ„ç‚¹:

1. æç¤ºæ‰¾ä¸åˆ°`package.json`æŠ¥é”™
   1. æ‰§è¡Œ`npm i`æ—¶ç»ˆç«¯æ‰€å¤„çš„è·¯å¾„ä¸‹éœ€è¦æœ‰`package.json`
2. çŸ¥è¯†ç‚¹æ¨¡ç³Š
   1. ä½œç”¨ï¼šåŸºæœ¬ä¸Šéƒ½å¯ä»¥ç†è§£
   2. è¯­æ³•ï¼š
      1. 0-1:
         1. æœ€éš¾çš„ï¼šçº ç»“ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ï¼Œæ¢ä¸ªå†™æ³•ä¸ºä»€ä¹ˆä¸è¡Œ
         2. **åˆæœŸï¼š**ä¸éœ€è¦çº ç»“è¯­æ³•çš„å…³é”®è¯ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯å­¦ä¹ ä½¿ç”¨ï¼Œä¸æ˜¯å­¦ä¹ å¦‚ä½•å®šäºè¯­æ³•
         3. çº ç»“è¿˜æœ‰ä»€ä¹ˆä½¿ç”¨ç»†èŠ‚ï¼Œå†™æ³•å˜ç§ï¼Œå…¼å®¹æ€§é—®é¢˜
            1. å…¼å®¹æ€§é—®é¢˜ï¼Œç°åœ¨ä¸ç”¨å¤ªè¿‡åœ¨æ„
            2. å„ç§å†™æ³•å˜ç§ï¼Œä½¿ç”¨ç»†èŠ‚ï¼Œå»ºç«‹åœ¨åŸºæœ¬ä½¿ç”¨å·²ç»ç†Ÿæ‚‰çš„æƒ…å†µä¸‹
            3. åŸºæœ¬ä½¿ç”¨ä¼šäº†ï¼Œè¿›é˜¶å†™æ³•è‡ªç„¶å°±ä¼šäº†
      2. 1-n:
         1. é€šè¿‡ç»ƒä¹ 
         2. é€šè¿‡å…·ä½“çš„éœ€æ±‚å»å·©å›ºä½¿ç”¨
3. æ¨èé˜…è¯»ï¼š
   1. ç¬”è®°ä¸­åŸºæœ¬ä¸Šéƒ½ä¼šé™„ä¸Š**å®˜æ–¹æ–‡æ¡£**
   2. æ˜é‡‘ç½‘
   3. è§†é¢‘ï¼Œä¸æ˜¯å¾ˆæ¨èï¼Œæ¯”è¾ƒè€—æ—¶







## å‡†å¤‡å·¥ä½œ

> å’±ä»¬å…ˆæ¥æŠŠå‡†å¤‡å·¥ä½œåšå¥½
>
> [ä¼ é€é—¨:webpackåŸºæœ¬å®‰è£…](https://webpack.docschina.org/guides/getting-started/#basic-setup)

### ç›®æ ‡:

1. èƒ½å¤Ÿæ­å»º`webpack`é¡¹ç›®çš„åŸºæœ¬ç»“æ„







### æ­¥éª¤ï¼š

1. ä»gitä»“åº“è·å–åŸºç¡€æµ‹è¯•æ¨¡æ¿ï¼Œå¹¶åˆ‡æ¢åˆ°æµ‹è¯•åˆ†æ”¯

   ```bash
   git clone https://gitee.com/westblueflower/webpack-lesson.git
   git checkout 01.åŸºæœ¬é…ç½®
   ```

2. åˆ‡æ¢åˆ°æ·˜å®é•œåƒ

   ```bash
   nrm use taobao
   ```

3. ç°åœ¨çš„é¡¹ç›®ç»“æ„ï¼š

   ```bash
   ğŸ“æ ¹ç›®å½•
       ğŸ“dist
       ğŸ“node_modules
       ğŸ“src
        ğŸ“„.gitignore
        ğŸ“„package-lock.json
        ğŸ“„package.json
        ğŸ“„webpack.config.js
   ```

   







### å°ç»“:

1. ç›®å‰é¡¹ç›®ç»“æ„ä¸­çš„`.gitignore`çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
2. æœ¬èŠ‚æ‰§è¡Œçš„`nrm use taobao`çš„ç›®çš„æ˜¯ï¼Ÿ





## å¼€å‘ - æ‰“åŒ…js

> `webpack`æ˜¯åŸºäº`Node.js`å¼€å‘çš„å‰ç«¯æ‰“åŒ…å·¥å…·ï¼Œå’±ä»¬å…ˆç”¨ä»–æ¥æ‰“åŒ…`js`è¯•è¯•

### ç›®æ ‡ï¼š

1. èƒ½å¤Ÿä½¿ç”¨`webpack`æ‰“åŒ…`js`æ–‡ä»¶
2. äº†è§£`webpack`é…ç½®æ–‡ä»¶ä¸­å‡ºå£å’Œå…¥å£





### æ­¥éª¤ï¼š

0. æ¥ä¸‹æ¥çš„æ“ä½œï¼Œé™¤äº†æ¨¡å—å®‰è£…ï¼Œå‡å¯ä»¥é€šè¿‡åˆ‡æ¢åˆ°`02.æ‰“åŒ…js`åˆ†æ”¯å®Œæˆ

   ```bash
   git add .
   git commit -m"è®°å½•ä¹‹å‰çš„æ“ä½œ"
   git checkout 02.æ‰“åŒ…js
   ```

   

1. `package.json`çš„`scripts`ä¸­å¢åŠ :

   1. æ‰§è¡Œ`webpack`
   2. è¯»å–`webpack.config.js`ä¸­çš„é…ç½®

```json
     "scripts": {
       "dev": "webpack --config webpack.config.js"
     },
```

2. å®‰è£…`webpack`

   1. **æ³¨ï¼š**`--save-dev`
      1. `--save`ä¿å­˜åˆ°`package.json`ä¸­
      2. `-dev`å¼€å‘ä¾èµ–ï¼Œåªåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨
      3. ä¸éœ€è¦è®°å¿†ä»€ä¹ˆæ—¶å€™éœ€è¦åŠ è¿™ä¸ªï¼Œæ–‡æ¡£ä¸­ä¼šç›´æ¥å‘Šè¯‰å’±ä»¬

   ```bash
   npm i webpack webpack-cli --save-dev
   ```

   

3. ä¸‹è½½æµ‹è¯•ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—

   ```bash
   npm i jquery moment
   ```

4. ä¿®æ”¹`/src/index.js`ä¸­çš„ä»£ç 

   ```javascript
   // å¯¼å…¥ç¬¬ä¸‰æ–¹æ¨¡å—
   import $ from 'jquery'
   import moment from 'moment'
   
   // æ˜¾ç¤ºå½“å‰æ—¶é—´
   function showTime() {
     $('.box').html(moment(Date.now()).format('YYYY-MMğŸˆ·ï¸DD HH:mm:ss'))
   }
   // æ›´æ–°é¡µé¢
   setInterval(() => {
     showTime()
   }, 1000)
   
   // é»˜è®¤æ‰§è¡Œä¸€æ¬¡
   showTime()
   
   ```

5. è°ƒæ•´`/webpack.config.js`ä¸­çš„é…ç½®ï¼š

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   
   module.exports = {
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
     },
   }
   
   ```

6. æ‰§è¡Œæ‰“åŒ…å‘½ä»¤`npm run dev`å¹¶è§‚å¯Ÿæ‰§è¡Œç»“æœï¼Ÿ





### æ­¥éª¤åˆ†æ:

1. `/webpack.config.js`
   1. æ˜¯`webpack`çš„é…ç½®æ–‡ä»¶
   2. å¯ä»¥è°ƒæ•´å¾ˆå¤šçš„è®¾ç½®
   3. æœ¬èŠ‚è°ƒæ•´äº†2ä¸ªè®¾ç½®ï¼Œåˆ†åˆ«æ˜¯
      1. æ‰“åŒ…çš„å…¥å£ï¼šä»¥è¯¥æ–‡ä»¶ä½œä¸ºå¼€å§‹ï¼Œè¯»å–ä»–ä¾èµ–çš„æ¨¡å—å¹¶è¿›è¡Œæ‰“åŒ…
      2. æ‰“åŒ…çš„å‡ºå£ï¼šæ‰“åŒ…ä¹‹åçš„æ–‡ä»¶åˆ°å“ªé‡Œå»
2. `/src/index.js`
   1. å¯¼å…¥äº†å‡ ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—
   2. å†™äº†ä¸€äº›è‡ªå·±çš„é€»è¾‘
3. `package.json`ä¸­çš„`scripts`
   1. é€šè¿‡`npm run dev`ç›´æ¥æ‰§è¡Œé…ç½®çš„å‘½ä»¤
   2. ä¸éœ€è¦å»è®°å¿†å¤æ‚çš„æ“ä½œ

### å°ç»“

1. `webpack.config.js`ä¸­é…ç½®äº†æ‰“åŒ…çš„å…¥å£å’Œä»€ä¹ˆï¼Ÿ
2. `npm run dev`ä¸­çš„`dev`é…ç½®åœ¨`package.json`ä¸­å“ªä¸ªå±æ€§é‡Œé¢ï¼Ÿ





### æ³¨æ„ï¼š

1. åˆ‡æ¢åˆ†æ”¯
   1. ç®€åŒ–ç¹æ‚çš„æ–‡ä»¶é…ç½®
   2. æ¯ä¸ªå¯¹åº”çš„åˆ†æ”¯éƒ½å·²ç»åšå¥½äº†åŸºç¡€çš„æ¨¡æ¿
   3. åˆ†æ”¯åï¼š
      1. master:
         1. `clone`ä¹‹åçš„é»˜è®¤åˆ†æ”¯,ä»Šå¤©æ‰€æœ‰å†…å®¹æå®šä¹‹åçš„ç»“æœ
         2. npm i
         3. npm run serve
         4. `git add .`
         5. `git commit -m"è®°å½•"`
      2. 01.åŸºç¡€æ¨¡æ¿
         1. æ²¡æœ‰ä»»ä½•é¢å¤–çš„ä»£ç 
         2. åªæœ‰åŸºç¡€çš„æ–‡ä»¶ç»“æ„
         3. æ²¡æœ‰åœ¨è¿™é‡Œåšä»»ä½•æ“ä½œ
      3. 02.æ‰“åŒ…js
         1. æ‰“åŒ…jsæ‰€éœ€çš„åŸºç¡€é…ç½®
         2. npm i æ¨¡å—å 
         3. npm run dev--->`dist`ç›®å½•
         4. package.jsonä¸­`scripts`
2. `npm i` å’Œ `npm i xxx`
   1. npm i è¯»å–package.jsonä¸­ä¿å­˜çš„åŒ…åï¼ˆæ¨¡å—åï¼‰å¹¶ä¸‹è½½
   2. npm i xx ä¸‹è½½åŒ…å¹¶ä¿å­˜åˆ° package.json
3. `path.resolve`
   1. éƒ½æ˜¯åŸºäºä¼ å…¥çš„è·¯å¾„ç”Ÿæˆ ç»å¯¹è·¯å¾„



















## æ‰“åŒ…ä»£ç æµ‹è¯•

> åˆšåˆšä»£ç å·²ç»æ‰“åŒ…å®Œæ¯•ï¼Œèƒ½ä¸èƒ½æ­£å¸¸æ‰§è¡Œå‘¢ï¼Ÿå’±ä»¬æ¥æµ‹è¯•ä¸€ä¸‹

### ç›®æ ‡

1. æµ‹è¯•ä¸Šä¸€èŠ‚æ‰“åŒ…çš„ä»£ç 



### æ­¥éª¤:

1. åˆ›å»º`/dist/index.html`
   1. å¯¼å…¥`/dist/bundle.js`
   2. è¿è¡Œå¹¶ç¡®è®¤æ•ˆæœ





### å°ç»“ï¼š

1. æ‰“åŒ…çš„ä»£ç èƒ½å¦æ­£å¸¸è¿è¡Œï¼Ÿ
2. èƒ½çœ‹å¾—æ‡‚å—ï¼Ÿ







## æ‰“åŒ…æ¨¡å¼

> ä»£ç å’±ä»¬æµ‹è¯•äº†ï¼Œç¡®å®å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯æ‰“åŒ…ä¹‹åçš„ä»£ç ï¼Œç»è¿‡äº†å‹ç¼©ï¼Œçœ‹ä¸å¤ªæ˜ç™½ï¼Ÿè€Œä¸”æ‰“åŒ…çš„æ—¶é—´æœ‰ç‚¹ä¹…ï¼Œå’‹åŠå‘¢ï¼Ÿ

### ç›®æ ‡ï¼š

1. äº†è§£`webpack`çš„ä¸¤ç§æ‰“åŒ…æ¨¡å¼
2. äº†è§£å¦‚ä½•é…ç½®`webpack`çš„ä¸¤ç§æ‰“åŒ…æ¨¡å¼





### æ­¥éª¤ï¼š

1. è°ƒæ•´`/webpack.config.js`

   1. å¢åŠ `mode`

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   
   module.exports = {
     // æ‰“åŒ…æ¨¡å¼ development å¼€å‘ / production ç”Ÿäº§
     mode: 'development',
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
     },
   }
   
   ```

2. å¯¹æ¯”ä¸¤æ¬¡æ‰“åŒ…çš„è€—æ—¶

3. å¯¹æ¯”ä¸¤æ¬¡æ‰“åŒ…çš„æ–‡ä»¶å†…å®¹

4. æµ‹è¯•æ‰“åŒ…ä¹‹åæ˜¯å¦èƒ½å¤Ÿè¿è¡Œ





### ä¸¤ç§æ‰“åŒ…æ¨¡å¼

1. **development** 
   - å¼€å‘ç¯å¢ƒ 
   - ä¸ä¼šå¯¹æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œä»£ç å‹ç¼©å’Œæ€§èƒ½ä¼˜åŒ– 
   - æ‰“åŒ…é€Ÿåº¦å¿«ï¼Œé€‚åˆåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨ 

2. **production** 
   - ç”Ÿäº§ç¯å¢ƒ 
   - ä¼šå¯¹æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶è¿›è¡Œä»£ç å‹ç¼©å’Œæ€§èƒ½ä¼˜åŒ–
   - æ‰“åŒ…é€Ÿåº¦å¾ˆæ…¢ï¼Œä»…é€‚åˆåœ¨é¡¹ç›®å‘å¸ƒé˜¶æ®µä½¿ç”¨ 



### å°ç»“ï¼š

1. `development`å’Œ`production`åˆ†åˆ«æ˜¯ä»€ä¹ˆæ¨¡å¼ï¼Ÿ
2. ä¸¤ç§æ¨¡å¼æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶æ˜¯å¦å¯ä»¥æ­£å¸¸è¿è¡Œï¼Ÿ

## å¼€å‘-æ¸…ç†distç›®å½•

> ä¹‹å‰åœ¨æµ‹è¯•æ‰“åŒ…çš„æ—¶å€™ï¼Œ`dist`ç›®å½•ä¸Šä¸€æ¬¡æ‰“åŒ…çš„æ–‡ä»¶ä¼šç»§ç»­ä¿ç•™åœ¨ç›®å½•ä¸‹ï¼Œè™½ç„¶ä¸å½±å“åŠŸèƒ½ï¼Œä½†æ˜¯çœ‹èµ·æ¥ã€‚ã€‚ã€‚
>
> [ä¼ é€é—¨:output.clean](https://webpack.js.org/configuration/output/#outputclean)

### ç›®æ ‡ï¼š

1. äº†è§£å¦‚ä½•è°ƒæ•´é…ç½®å®ç°æ¸…ç†`dist`ç›®å½•





### æ­¥éª¤ï¼š

1. è°ƒæ•´`/webpack.config.js`

   1. å¢åŠ æ¸…ç†`dist`ç›®å½•çš„é…ç½®

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   
   module.exports = {
     // æ‰“åŒ…æ¨¡å¼ development å¼€å‘ / production ç”Ÿäº§
     mode: 'development',
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
       // æ¯æ¬¡æ‰“åŒ…æ—¶æ¸…é™¤distç›®å½•
       clean: true,
     },
   }
   
   ```

2. é‡æ–°æ‰§è¡Œæ‰“åŒ…å‘½ä»¤:`npm run dev`ï¼Œè§‚å¯Ÿ`dist`ç›®å½•çš„æ”¹å˜

3. è°ƒæ•´`output`ä¸­çš„å‡ºå£æ–‡ä»¶åï¼Œé‡æ–°æ‰“åŒ…ï¼Œå¹¶è§‚å¯Ÿ`dist`ç›®å½•çš„æ”¹å˜





### å°ç»“:

1. `clean`è®¾ç½®ä¸ºä»€ä¹ˆå¯ä»¥å®ç°æ‰“åŒ…æ—¶æ¸…ç†`dist`ç›®å½•ï¼Ÿ
2. `dist`ç›®å½•ä¸‹ç”¨æ¥æµ‹è¯•çš„`html`é¡µé¢è¿˜åœ¨å—ï¼Ÿ



## å¼€å‘-html-webpack-pluginæ’ä»¶

> é€šè¿‡æ’ä»¶å¯ä»¥ä¸º`webpack`é¢å¤–å¢åŠ åŠŸèƒ½ï¼Œè¿™ä¸€èŠ‚å’±ä»¬é€šè¿‡æ’ä»¶æ¥è§£å†³ä¸Šä¸€èŠ‚`html`é¡µé¢è¢«åˆ é™¤çš„é—®é¢˜
>
> [ä¼ é€é—¨:html-webpack-pluginé¦–é¡µ](https://github.com/jantimon/html-webpack-plugin)
>
> [ä¼ é€é—¨:webpack-html-webpack-pluginè¯´æ˜é¡µ](https://github.com/jantimon/html-webpack-plugin)

### ç›®æ ‡ï¼š

1. äº†è§£`html-webpack-plugin`æ’ä»¶çš„ä½œç”¨









### æ­¥éª¤01-åŸºæœ¬ä½¿ç”¨ï¼š

1. `03.html-webpack-pluginæ’ä»¶`åˆ†æ”¯å·²ç»å‡†å¤‡å¥½äº†åŸºç¡€çš„æ¨¡æ¿

   1. ```bash
      git checkout 03.html-webpack-pluginæ’ä»¶
      ```

2. ä¸‹è½½`html-webpack-plugin`æ’ä»¶

   ```bash
    npm i --save-dev html-webpack-plugin
   ```

3. è°ƒæ•´`/webpack.config.js`

   1. å¢åŠ æ’ä»¶å®ä¾‹åŒ–çš„é…ç½®

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   const HtmlWebpackPlugin = require('html-webpack-plugin')
   
   module.exports = {
     // æ‰“åŒ…æ¨¡å¼ development å¼€å‘ / production ç”Ÿäº§
     mode: 'development',
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
       // æ¯æ¬¡æ‰“åŒ…æ—¶æ¸…é™¤distç›®å½•
       clean: true,
     },
     plugins: [
       new HtmlWebpackPlugin(),
     ],
   }
   
   ```

4. æ‰“åŒ…æµ‹è¯•

5. **åŠŸèƒ½è¯´æ˜ï¼š**

   1. å®‰è£…å¹¶é…ç½®äº†æ’ä»¶ä¹‹å
   2. æ‰“åŒ…æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆ`index.html`é¡µé¢åˆ°`dist`ç›®å½•
   3. è‡ªåŠ¨æŠŠæ‰“åŒ…ç”Ÿæˆçš„`js`æ–‡ä»¶æ’å…¥åˆ°é¡µé¢ä¸­
   4. å¦‚æœè¦æ›´è¯¦ç»†çš„è®¾ç½®ï¼Œå¾€ä¸‹çœ‹â†“â†“â†“â†“



### é…ç½®è°ƒæ•´

1. `/public/index.html`ä¸­å¢åŠ æ¨¡æ¿é¡µ

   1. å‡†å¤‡é»˜è®¤çš„`.box`ç›’å­

   ```html
   <!DOCTYPE html>
   <html lang="en">
     <head>
       <meta charset="UTF-8" />
       <meta http-equiv="X-UA-Compatible" content="IE=edge" />
       <meta name="viewport" content="width=device-width, initial-scale=1.0" />
       <title>æµ‹è¯•ç”¨æ¨¡æ¿</title>
     </head>
     <body>
       <div class="box"></div>
     </body>
   </html>
   
   ```

2. è°ƒæ•´`webpack.config.js`ä¸­æ’ä»¶çš„é…ç½®

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   const HtmlWebpackPlugin = require('html-webpack-plugin')
   
   module.exports = {
     // æ‰“åŒ…æ¨¡å¼ development å¼€å‘ / production ç”Ÿäº§
     mode: 'development',
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
       // æ¯æ¬¡æ‰“åŒ…æ—¶æ¸…é™¤distç›®å½•
       clean: true,
     },
     plugins: [
       new HtmlWebpackPlugin({
         // jsæ’å…¥çš„ä½ç½®
         inject: 'body',
         // æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å
         filename: 'index.html',
         template: path.resolve(__dirname, './public/index.html'),
       }),
     ],
   }
   
   ```

3. é‡æ–°æ‰“åŒ…ï¼Œæµ‹è¯•é…ç½®æ˜¯å¦ç”Ÿæ•ˆ

4. æ›´å¤šçš„é…ç½®å¯ä»¥é€šè¿‡å®˜ç½‘ç¡®è®¤

5. **è¯´æ˜:**

   1. è°ƒæ•´äº†`.js`æ–‡ä»¶çš„æ’å…¥ä½ç½®
   2. åŸºäºç°æˆçš„æ¨¡æ¿è¿›è¡Œ`html`é¡µé¢ç”Ÿæˆ





### å°ç»“ï¼š

1. æœ¬èŠ‚å®‰è£…çš„`html-webpack-plugin`æ˜¯`webpack`çš„ä»€ä¹ˆï¼Ÿ
2. æœ¬èŠ‚çš„é…ç½®å®Œæˆä¹‹å`dist`ç›®å½•ä¸‹çš„`index.html`æ–‡ä»¶æ˜¯å¦è¿˜éœ€è¦æˆ‘ä»¬è‡ªå·±åˆ›å»ºï¼Ÿ



### æ³¨æ„ï¼š

1. git branch åªèƒ½æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯
2. git clone é»˜è®¤åªä¼šå…‹éš† masteråˆ†æ”¯
   1. git branch çœ‹ä¸åˆ°è¿œç¨‹åˆ†æ”¯
   2. git branch -a å³å¯





## å¼€å‘-æ‰“åŒ…css

> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå’±ä»¬å¤„ç†çš„éƒ½æ˜¯`js`æ–‡ä»¶,å‰ç«¯å¼€å‘ä¸­å¯ä¸ä»…ä»…æœ‰`js`å“¦ï¼Œèƒ½ä¸èƒ½æ‰“åŒ…`css`æˆ–è€…å…¶ä»–çš„ä¸€äº›æ–‡ä»¶å‘¢ï¼Ÿ
>
> [ä¼ é€é—¨:æ‰“åŒ…css](https://webpack.js.org/guides/asset-management/#loading-css)

### ç›®æ ‡:

1. äº†è§£`webpack`ä¸­`loader`çš„ä½œç”¨
2. äº†è§£å¦‚ä½•è®©`webpack`æ‰“åŒ…`css`





### æ¦‚å¿µ:

![image-20220327110130495](https://gitee.com/westblueflower/imgs/raw/master/img/202203271459665.png)

1. `webpack`é»˜è®¤åªèƒ½è§£æ`js`æ¨¡å—
2. å¦‚æœæ˜¯å…¶ä»–çš„æ–‡ä»¶éœ€è¦å®‰è£…å¯¹åº”çš„`loader`
3. `loader`æ˜¯æ–‡ä»¶åŠ è½½å™¨ï¼Œèƒ½å¤ŸåŠ è½½èµ„æºæ–‡ä»¶ï¼Œå¹¶å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œç‰¹å®šçš„å¤„ç†ï¼Œç„¶åæ‰“åŒ…çš„æŒ‡å®šæ–‡ä»¶ä¸­ï¼Œ
   1. ç®€å•æ¥è¯´å°±æ˜¯å°†`webpack`ä¼ å…¥çš„å­—ç¬¦ä¸²åšå‡ºç‰¹å®šçš„å¤„ç†ä¿®æ”¹





### æ­¥éª¤:

1. å¯ä»¥åˆ‡æ¢åˆ°`04.æ‰“åŒ…css`åˆ†æ”¯ï¼Œè·å–å¦‚ä¸‹æ¨¡æ¿

   ```bash
   git add .
   git commit -m"è®°å½•ä¹‹å‰çš„æ“ä½œ"
   git checkout 04.æ‰“åŒ…css
   ```

2. ä¸‹è½½æ‰€éœ€çš„`loader`,ç¬¬ä¸‰æ–¹æ¨¡å—

   ```bash
   npm i --save-dev style-loader css-loader
   ```

   

3. è°ƒæ•´`webpack.config.js`çš„é…ç½®

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   const HtmlWebpackPlugin = require('html-webpack-plugin')
   
   module.exports = {
     // æ‰“åŒ…æ¨¡å¼ development å¼€å‘ / production ç”Ÿäº§
     mode: 'development',
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
       // æ¯æ¬¡æ‰“åŒ…æ—¶æ¸…é™¤distç›®å½•
       clean: true,
     },
     // æ¨¡å—é…ç½®
     module: {
       // è§£æè§„åˆ™
       rules: [
         {
           test: /\.css$/i, // .cssç»“å°¾çš„æ–‡ä»¶
           use: ['style-loader', 'css-loader'], // é€šè¿‡ è¿™2ä¸ª loaderè¿›è¡Œè§£æ
         },
       ],
     },
     // æ’ä»¶é…ç½®
     plugins: [
       new HtmlWebpackPlugin({
         // jsæ’å…¥çš„ä½ç½®
         inject: 'body',
         // æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å
         filename: 'index.html',
         // ä½¿ç”¨å“ªä¸ªæ–‡ä»¶ä½œä¸ºæ¨¡æ¿
         template: path.resolve(__dirname, './public/index.html'),
       }),
     ],
   }
   
   ```

4. æ·»åŠ `css`æ–‡ä»¶

   1. `/src/assets/css/base.css`
   2. ç¼–å†™æµ‹è¯•æ¼”ç¤º

5. å¯¼å…¥`/src/index.js`

   ```javascript
   // å¯¼å…¥css 
   import './assets/css/base.css'
   ```

6. é‡æ–°è¿è¡Œæ‰“åŒ…å‘½ä»¤

   ```bash
   npm run dev
   ```





### è¯•ä¸€è¯•

1. è°ƒæ•´`/src/assets/css/base.css`ä¸­çš„å†…å®¹ï¼Œç¡®è®¤è§£æç»“æœ
2. å¯ä»¥é¢å¤–çš„æ·»åŠ å…¶ä»–çš„æ ·å¼æ–‡ä»¶ï¼Œç»§ç»­æµ‹è¯•
3. `.css`æ–‡ä»¶å¯¼å…¥çš„è¯­æ³•ï¼Œåªæ˜¯éœ€è¦æ•´åˆæ¨¡å—ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯:`import 'xxx.css'`





### å°ç»“:

1. `webpack`é»˜è®¤æ˜¯å¦å¯ä»¥è§£æ`.css`æ–‡ä»¶ï¼Ÿ
2. ä¸ºäº†è®©`webpack`å¯ä»¥è§£æå…¶ä»–æ–‡ä»¶éœ€è¦å®‰è£…å¯¹åº”çš„ä»€ä¹ˆï¼Ÿ





## å¼€å‘-æ‰“åŒ…less

> ä¸Šä¸€èŠ‚æ ·å¼çš„æ˜¯æ‰“åŒ…`css`,å‰ç«¯å¼€å‘ä¸­ä¸ºäº†ç®€åŒ–ç¼–ç ï¼Œå’±ä»¬å¯èƒ½ä¼šä½¿ç”¨ä¸€äº›cssé¢„å¤„ç†ç¨‹åºï¼Œè¿™ä¸€èŠ‚å’±ä»¬ä»¥`less`ä¸ºä¾‹
>
> [ä¼ é€é—¨:less-loader](https://webpack.js.org/loaders/less-loader/)

### ç›®æ ‡:

1. äº†è§£å¦‚ä½•è®©`webpack`æ‰“åŒ…`less`





### æ¦‚å¿µ:

![image-20220327110130495](https://gitee.com/westblueflower/imgs/raw/master/img/202203271459665.png)

1. `webpack`é»˜è®¤åªèƒ½è§£æ`js`æ¨¡å—
2. å¦‚æœæ˜¯å…¶ä»–çš„æ–‡ä»¶éœ€è¦å®‰è£…å¯¹åº”çš„`loader`
3. `loader`æ˜¯æ–‡ä»¶åŠ è½½å™¨ï¼Œèƒ½å¤ŸåŠ è½½èµ„æºæ–‡ä»¶ï¼Œå¹¶å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œç‰¹å®šçš„å¤„ç†ï¼Œç„¶åæ‰“åŒ…çš„æŒ‡å®šæ–‡ä»¶ä¸­ï¼Œ
   1. ç®€å•æ¥è¯´å°±æ˜¯å°†`webpack`ä¼ å…¥çš„å­—ç¬¦ä¸²åšå‡ºç‰¹å®šçš„å¤„ç†ä¿®æ”¹





### æ­¥éª¤:

1. å¯ä»¥åˆ‡æ¢åˆ°`06.æ‰“åŒ…less`åˆ†æ”¯ï¼Œè·å–å¦‚ä¸‹æ¨¡æ¿

   ```bash
   git add .
   git commit -m"è®°å½•ä¹‹å‰çš„æ“ä½œ"
   git checkout 05.æ‰“åŒ…less
   ```

2. ä¸‹è½½æ‰€éœ€çš„`loader`,ç¬¬ä¸‰æ–¹æ¨¡å—

   ```bash
   npm i less less-loader --save-dev
   ```

3. è°ƒæ•´`webpack.config.js`çš„é…ç½®

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   const HtmlWebpackPlugin = require('html-webpack-plugin')
   
   module.exports = {
     // æ‰“åŒ…æ¨¡å¼ development å¼€å‘ / production ç”Ÿäº§
     mode: 'development',
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
       // æ¯æ¬¡æ‰“åŒ…æ—¶æ¸…é™¤distç›®å½•
       clean: true,
     },
     // æ¨¡å—é…ç½®
     module: {
       // è§£æè§„åˆ™
       rules: [
         {
           test: /\.css$/i, // .cssç»“å°¾çš„æ–‡ä»¶
           use: ['style-loader', 'css-loader'], // é€šè¿‡ è¿™2ä¸ª loaderè¿›è¡Œè§£æ
         },
         {
           test: /\.less$/i, // .lessç»“å°¾çš„æ–‡ä»¶
           use: [
             // ä½¿ç”¨å¦‚ä¸‹çš„loaderè¿›è¡Œè§£æ
             'style-loader',
             'css-loader',
             'less-loader',
           ],
         },
       ],
     },
     // æ’ä»¶é…ç½®
     plugins: [
       new HtmlWebpackPlugin({
         // jsæ’å…¥çš„ä½ç½®
         inject: 'body',
         // æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å
         filename: 'index.html',
         // ä½¿ç”¨å“ªä¸ªæ–‡ä»¶ä½œä¸ºæ¨¡æ¿
         template: path.resolve(__dirname, './public/index.html'),
       }),
     ],
   }
   
   ```

4. æ·»åŠ `less`æ–‡ä»¶

   1. `/src/assets/less/index.less`

   2. ç¼–å†™æµ‹è¯•æ ·å¼

   3. ```less
      body {
        background-color: skyblue;
        .box {
          border: 1px solid #000;
          padding: 20px;
          background-color: pink;
          font-size: 20px;
          border-radius: 20px;
        }
      }
      
      ```

5. å¯¼å…¥`/src/index.js`

   ```javascript
   // å¯¼å…¥css 
   // import './assets/base.css'
   // å¯¼å…¥less
   import './assets/less/index.less'
   ```

6. é‡æ–°è¿è¡Œæ‰“åŒ…å‘½ä»¤

   ```bash
   npm run dev
   ```





### è¯•ä¸€è¯•

1. è°ƒæ•´`/src/assets/less/index.less`ä¸­çš„å†…å®¹ï¼Œç¡®è®¤è§£æç»“æœ
2. å¯ä»¥é¢å¤–çš„æ·»åŠ å…¶ä»–çš„æ ·å¼æ–‡ä»¶ï¼Œç»§ç»­æµ‹è¯•
3. `.less`æ–‡ä»¶å¯¼å…¥çš„è¯­æ³•ï¼Œåªæ˜¯éœ€è¦æ•´åˆæ¨¡å—ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ˜¯:`import 'xxx.less'`





### å°ç»“:

1. `webpack`é»˜è®¤æ˜¯å¦å¯ä»¥è§£æ`.less`æ–‡ä»¶ï¼Ÿ





## å¼€å‘-æ‰“åŒ…å›¾ç‰‡

> é™¤äº†æ ·å¼æ–‡ä»¶ä»¥å¤–ï¼Œå›¾ç‰‡ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„èµ„æºå“¦ï¼Œå¦‚ä½•æ‰“åŒ…å‘¢ï¼Ÿ
>
> [ä¼ é€é—¨:åŠ è½½å›¾ç‰‡](https://webpack.docschina.org/guides/asset-management/#loading-images)

### ç›®æ ‡:

1. äº†è§£`webpack`ä¸­å¦‚ä½•æ‰“åŒ…å›¾ç‰‡



### æ¦‚å¿µï¼š

1. å›¾ç‰‡èµ„æºæ— éœ€é¢å¤–çš„å®‰è£…å…¶ä»–æ¨¡å—ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨å†…ç½®çš„[asset/modules](https://webpack.docschina.org/guides/asset-modules/)
2. èµ„æºæ¨¡å—ç±»å‹(asset module type)ï¼Œé€šè¿‡æ·»åŠ  4 ç§æ–°çš„æ¨¡å—ç±»å‹ï¼Œæ¥æ›¿æ¢æ‰€æœ‰è¿™äº› loaderï¼š
   - `asset/resource` å‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶å¹¶å¯¼å‡º URLã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ `file-loader` å®ç°ã€‚
   - `asset/inline` å¯¼å‡ºä¸€ä¸ªèµ„æºçš„ data URIã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ `url-loader` å®ç°ã€‚
   - `asset/source` å¯¼å‡ºèµ„æºçš„æºä»£ç ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ `raw-loader` å®ç°ã€‚
   - `asset` åœ¨å¯¼å‡ºä¸€ä¸ª data URI å’Œå‘é€ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ä¹‹é—´è‡ªåŠ¨é€‰æ‹©ã€‚ä¹‹å‰é€šè¿‡ä½¿ç”¨ `url-loader`ï¼Œå¹¶ä¸”é…ç½®èµ„æºä½“ç§¯é™åˆ¶å®ç°ã€‚



### æ­¥éª¤ï¼š

1. ç»“åˆå®˜æ–¹æ–‡æ¡£è°ƒæ•´`webpack.config.js`

   ```javascript
      module: {
        rules: [
          {
            test: /\.css$/i,
            use: ['style-loader', 'css-loader'],
          },
         {
           test: /\.(png|svg|jpg|jpeg|gif)$/i,
           type: 'asset/resource',
         },
        ],
      },
   ```

   

2. æ·»åŠ ä¸€äº›æµ‹è¯•å›¾ç‰‡åˆ°`/assets/imgs`ç›®å½•ä¸‹

3. `/src/index.js`ä¸­å¯¼å…¥å¹¶ä½¿ç”¨,æ¯”å¦‚

   ```javascript
   // å¯¼å…¥å›¾ç‰‡
   import dog from './assets/imgs/dog.png'
   import shake from './assets/imgs/shake.gif'
   
   function appendImgs() {
     for (let i = 0; i < 100; i++) {
       $('<img />').attr('src', shake).appendTo('body')
       $('<img />').attr('src', dog).appendTo('body')
     }
   }
   appendImgs()
   
   ```

4. æ‰§è¡Œå‘½ä»¤:

   ```bash
   npm run dev
   ```





### å°ç»“:

1. `webpack`åŠ è½½å›¾ç‰‡èµ„æºæ˜¯å¦éœ€è¦é¢å¤–çš„å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Ÿ





## å¼€å‘-watchæ¨¡å¼

> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ¯æ¬¡è°ƒæ•´é…ç½®ï¼Œå’±ä»¬éƒ½éœ€è¦é‡æ–°è¿è¡Œä¸€æ¬¡ï¼Œè¾ƒä¸ºéº»çƒ¦ï¼Œä¸æ˜¯è‡ªåŠ¨åŒ–å—ï¼Ÿè¿™ä¸€èŠ‚å’±ä»¬å°±æ¥å¼€å¯`watch`æ¨¡å¼
>
> [ä¼ é€é—¨ï¼šä½¿ç”¨watchæ¨¡å¼](https://www.webpackjs.com/guides/development/#%E4%BD%BF%E7%94%A8%E8%A7%82%E5%AF%9F%E6%A8%A1%E5%BC%8F)

### ç›®æ ‡ï¼š

1. äº†è§£`watch`æ¨¡å¼çš„å·¥ä½œåŸç†





### æ­¥éª¤ï¼š

1. è°ƒæ•´`package.json`ä¸­çš„`scripts`å¢åŠ å‘½ä»¤

   ```json
     "scripts": {
       "dev": "webpack --config webpack.config.js",
       "watch": "webpack watch --config webpack.config.js",
     },
   ```

2. æ‰§è¡Œæ–°å¢åŠ çš„å‘½ä»¤:

   ```bash
   npm run watch
   ```

3. ä¿®æ”¹`/src/index.js`ï¼Œæˆ–è€…ä»–å†…éƒ¨å¼•ç”¨çš„æ–‡ä»¶ï¼Œè§‚å¯Ÿ`ç»ˆç«¯`çš„å˜åŒ–

   





### è¯´æ˜:

1. `watch`æ¨¡å¼
   1. æ£€æµ‹æ‰“åŒ…å…¥å£
   2. ä»¥åŠæ‰“åŒ…å…¥å£å¼•ç”¨çš„æ–‡ä»¶æ˜¯å¦å‘ç”Ÿå˜åŠ¨
   3. å¦‚æœå‘ç”Ÿå˜åŠ¨ï¼Œå°±é‡æ–°æ‰“åŒ…





### å°ç»“:

1. å¼€å¯`watch`æ¨¡å¼æ˜¯å¦éœ€è¦å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Ÿ



### æ³¨æ„ï¼š

1. å›¾ç‰‡çš„è§£æï¼š
   1. ä¸éœ€è¦é¢å¤–çš„å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—
   2. éœ€è¦è°ƒæ•´`webpack.config.js`ä¸­çš„é…ç½®
2. git add . è¿™ä¸ªå‘½ä»¤åªèƒ½å¤Ÿè¯†åˆ«åˆ°å½“å‰ç›®å½•åŠå­ç›®å½•ä¸­çš„ä¿®æ”¹
   1. `/src`ç›®å½•
      1. å‘½ä»¤åœ¨è¿™é‡Œæ‰§è¡Œ
      2. srcç›®å½•å¤–é¢çš„æ–‡ä»¶æ›´æ”¹æ·»åŠ ä¸åˆ°gitä¸­
   2. `æ ¹ç›®å½•`
   3. ç»ˆç«¯ä¸­æ‰€å¤„çš„ç›®å½•åº”è¯¥æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•







## å¼€å‘-webpack-dev-server 

> ä¸Šä¸€èŠ‚å·²ç»æå®šäº†ä¸€ä¸ªè‡ªåŠ¨åŒ–,ä½†æ˜¯æµè§ˆå™¨çš„åˆ·æ–°è¿˜è¦å’±ä»¬æ¥ï¼Œè¿™ä¸€èŠ‚å’±ä»¬æ¥æ¼”ç¤ºå¦å¤–ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ’ä»¶`dev-server`ï¼Œä¼šå¼€å¯ä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¹¶è‡ªåŠ¨ç›‘æµ‹æ–‡ä»¶å˜æ›´ï¼Œåˆ·æ–°é¡µé¢
>
> [ä¼ é€é—¨:webpack-dev-server](https://webpack.js.org/guides/development/#using-webpack-dev-server)

### ç›®æ ‡:

1. äº†è§£`webpack-dev-server`æ’ä»¶çš„ä½œç”¨
2. äº†è§£å¦‚ä½•å®‰è£…å¹¶é…ç½®`webpack-dev-server`æ’ä»¶ 





### åŸºæœ¬ä½¿ç”¨

1. å¯ä»¥åˆ‡æ¢åˆ°`07.webpack-dev-serveræ’ä»¶`å¿«é€Ÿè·å–æ¨¡æ¿

2. ä¸‹è½½`webpack-dev-server`æ’ä»¶

   ```bash
   npm i --save-dev webpack-dev-server
   ```

3. è°ƒæ•´`/webpack.config.js`

   1. å¢åŠ `devServer`çš„é…ç½®

   ```javascript
   // å¯¼å…¥pathæ¨¡å—
   const path = require('path')
   const HtmlWebpackPlugin = require('html-webpack-plugin')
   
   module.exports = {
     // æ‰“åŒ…æ¨¡å¼ development å¼€å‘ / production ç”Ÿäº§
     mode: 'development',
     // æ‰“åŒ…çš„å…¥å£æ–‡ä»¶
     entry: path.resolve(__dirname, 'src', 'index.js'),
     // å¼€å‘æœåŠ¡å™¨
     devServer: {
       port: 9000, // å®æ—¶æ‰“åŒ…æ‰€ç”¨çš„ç«¯å£å·
       open: true, // åˆæ¬¡æ‰“åŒ…å®Œæˆåï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
       // æœåŠ¡å™¨çš„æ ¹ç›®å½•
       static: path.join(__dirname, './dist'),
     },
     // æ‰“åŒ…åˆ°å“ªé‡Œ
     output: {
       // ä½¿ç”¨ç»å¯¹è·¯å¾„
       path: path.resolve(__dirname, 'dist'),
       // æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å
       filename: 'bundle.js',
       // æ¯æ¬¡æ‰“åŒ…æ—¶æ¸…é™¤distç›®å½•
       clean: true,
     },
     // æ¨¡å—é…ç½®
     module: {
       // è§£æè§„åˆ™
       rules: [
         {
           test: /\.css$/i, // .cssç»“å°¾çš„æ–‡ä»¶
           use: ['style-loader', 'css-loader'], // é€šè¿‡ è¿™2ä¸ª loaderè¿›è¡Œè§£æ
         },
         {
           test: /\.less$/i, // .lessç»“å°¾çš„æ–‡ä»¶
           use: [
             // ä½¿ç”¨å¦‚ä¸‹çš„loaderè¿›è¡Œè§£æ
             'style-loader',
             'css-loader',
             'less-loader',
           ],
         },
       ],
     },
     // æ’ä»¶é…ç½®
     plugins: [
       new HtmlWebpackPlugin({
         // jsæ’å…¥çš„ä½ç½®
         inject: 'body',
         // æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶å
         filename: 'index.html',
         // ä½¿ç”¨å“ªä¸ªæ–‡ä»¶ä½œä¸ºæ¨¡æ¿
         template: path.resolve(__dirname, './public/index.html'),
       }),
     ],
   }
   
   ```

4. è°ƒæ•´`package.json`ï¼Œå¢åŠ ä¸€æ¡å‘½ä»¤

   ```json
     "scripts": {
       "dev": "webpack --config webpack.config.js",
       "watch": "webpack watch --config webpack.config.js",
       "serve": "webpack serve --config webpack.config.js"
     },
   ```

   

5. æ‰§è¡Œå‘½ä»¤ï¼Œè¿è¡Œé¡¹ç›®

   ```bash
   npm run serve
   ```

   

6. ä¿®æ”¹`/src/index.js`å¹¶è§‚å¯Ÿæµè§ˆå™¨çš„æ”¹å˜

7. **æ³¨æ„ï¼š**

   1. å‡¡æ˜¯ä¿®æ”¹äº† `webpack.config.js` é…ç½®æ–‡ä»¶ï¼Œæˆ–ä¿®æ”¹äº† `package.json` é…ç½®æ–‡ä»¶ï¼Œå¿…é¡»é‡å¯å®æ—¶æ‰“åŒ…çš„æœåŠ¡å™¨ï¼Œå¦åˆ™æœ€æ–°çš„é…ç½®æ–‡ä»¶æ— æ³•ç”Ÿæ•ˆï¼  



### è¯´æ˜:

#### æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å“ªå„¿å»äº†ï¼Ÿ 

1. ä¸é…ç½® webpack-dev-server çš„æƒ…å†µä¸‹ï¼Œwebpack æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ï¼Œä¼šå­˜æ”¾åˆ°å®é™…çš„ç‰©ç†ç£ç›˜ä¸Š 
   - ä¸¥æ ¼éµå®ˆå¼€å‘è€…åœ¨ webpack.config.js ä¸­æŒ‡å®šé…ç½® 
   - æ ¹æ® output èŠ‚ç‚¹æŒ‡å®šè·¯å¾„è¿›è¡Œå­˜æ”¾ 
2. é…ç½®äº† `webpack-dev-server` ä¹‹åï¼Œæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å­˜æ”¾åˆ°äº†å†…å­˜ä¸­
   - ä¸å†æ ¹æ® output èŠ‚ç‚¹æŒ‡å®šçš„è·¯å¾„ï¼Œå­˜æ”¾åˆ°å®é™…çš„ç‰©ç†ç£ç›˜ä¸Š
   - æé«˜äº†å®æ—¶æ‰“åŒ…è¾“å‡ºçš„æ€§èƒ½ï¼Œå› ä¸ºå†…å­˜æ¯”ç‰©ç†ç£ç›˜é€Ÿåº¦å¿«å¾ˆå¤š
3. `http://localhost:9000/`
   1. è®¿é—®çš„æ˜¯`devServer`é…ç½®ä¸­`static`çš„æ ¹ç›®å½•
   2. `/index.html`å¯ä»¥çœç•¥ä¸å†™
4. å¯ä»¥æµ‹è¯•è®¿é—®`/bundle.js`ï¼Œä¼šå»è¯»å–`/dist/bundle.js`æ–‡ä»¶ï¼Œå¹¶æ˜¾ç¤ºå‡ºæ¥
5. å› ä¸ºå¼€å¯äº†æœåŠ¡å™¨ï¼Œå¦‚æœè¦è°ƒæ•´`webpack.config.js`éœ€è¦ï¼Œ`ctrl+c`å…³é—­å†é‡æ–°è¿è¡Œ



### å°ç»“ï¼š

1. `webpack-dev-server`çš„æœ¬è´¨æ˜¯å¼€å¯äº†ä¸€ä¸ªæµ‹è¯•ç”¨æœåŠ¡å™¨

## HMR

> å¼€å¯äº†`dev-server`ä¹‹åï¼Œè¿˜ä¼šé»˜è®¤å¼€å¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„åŠŸèƒ½ï¼Œ`HMR(hot module replacement)`
>
> [ä¼ é€é—¨ï¼šæ¨¡å—çƒ­æ›¿æ¢](https://www.webpackjs.com/concepts/hot-module-replacement/)

### ç›®æ ‡:

1. äº†è§£`HMR`çš„ä½œç”¨
2. äº†è§£å¦‚ä½•å¼€å¯æˆ–è€…å…³é—­`HMR`



### æ­¥éª¤ï¼š

1. è°ƒæ•´`webpack.config.js`ä¸­çš„é…ç½®å³å¯å¼€å¯æˆ–è€…å…³é—­`HMR`

   ```javascript
   module.exports = {
     // å¼€å‘æœåŠ¡å™¨
     devServer: {
       port: 9000, // å®æ—¶æ‰“åŒ…æ‰€ç”¨çš„ç«¯å£å·
       open: true, // åˆæ¬¡æ‰“åŒ…å®Œæˆåï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
       // æœåŠ¡å™¨çš„æ ¹ç›®å½•
       static: path.join(__dirname, './dist'),
       hot: false,// æ¨¡å—çƒ­æ›¿æ¢ true / false å¼€å¯ / å…³é—­
     },
   }
   
   ```

2. `hot`è®¾ç½®ä¸º`true`

   1. ä¿®æ”¹`/src/index.js`ä¸­å¼•ç”¨çš„æ ·å¼æ–‡ä»¶
   2. è§‚å¯Ÿæµè§ˆå™¨æ˜¯å¦åˆ·æ–°

3. `hot`è®¾ç½®ä¸º`false`

   1. ä¿®æ”¹`/src/index.js`ä¸­å¼•ç”¨çš„æ ·å¼æ–‡ä»¶
   2. è§‚å¯Ÿæµè§ˆå™¨æ˜¯å¦åˆ·æ–°





### è¯´æ˜ï¼š

1. å¼€å¯äº†`HMR`ä¹‹åï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº†ä»£ç å¹¶ä¿å­˜æ—¶
2. `HMR` ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ›¿æ¢ã€æ·»åŠ æˆ–åˆ é™¤æ¨¡å—ï¼Œè€Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚
3. `HMR` ä¸»è¦é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼ï¼Œæ¥æ˜¾è‘—åŠ å¿«å¼€å‘é€Ÿåº¦ï¼š
   - ä¿ç•™åœ¨å®Œå…¨é‡æ–°åŠ è½½é¡µé¢æ—¶ä¸¢å¤±çš„åº”ç”¨ç¨‹åºçŠ¶æ€ï¼›
   - åªæ›´æ–°å˜æ›´å†…å®¹ï¼Œä»¥èŠ‚çœå®è´µçš„å¼€å‘æ—¶é—´ï¼›
   - è°ƒæ•´æ ·å¼æ›´åŠ å¿«é€Ÿ - å‡ ä¹ç›¸å½“äºåœ¨æµè§ˆå™¨è°ƒè¯•å™¨ä¸­æ›´æ”¹æ ·å¼ã€‚
4. `HMR`æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œå¦‚éå¿…è¦ï¼Œå¯ä»¥ä¸å»åŠ¨ä»–







### å°ç»“ï¼š

1. ä½¿ç”¨`dev-server`è¿›è¡Œå¼€å‘æ—¶ï¼Œæ˜¯å¦æ¯æ¬¡ä»£ç çš„æ›´æ”¹éƒ½ä¼šåˆ·æ–°æµè§ˆå™¨ï¼Ÿ
2. `dev-server`æ˜¯é€šè¿‡ä»€ä¹ˆåŠŸèƒ½å®ç°çš„è¿™ä¸ªæ•ˆæœï¼Ÿ







## ä»£ç æ‰“åŒ…

> åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå’±ä»¬æ­å»ºçš„éƒ½æ˜¯å¼€å‘ç¯å¢ƒï¼Œé€šè¿‡å¾ˆå¤šçš„é…ç½®å·²ç»å®ç°äº†ï¼Œå¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚è§£æ`css`ï¼Œ`å›¾ç‰‡`ï¼Œè‡ªåŠ¨åˆ·æ–°ã€‚ä½†æ˜¯ä»£ç å†™å®Œä¹‹åï¼Œå‘å¸ƒåˆ°æœåŠ¡å™¨ï¼Œå¯ä¸æ˜¯æŠŠç°åœ¨è¿™ä¸ªé¡¹ç›®ç›´æ¥ä¸¢åˆ°æœåŠ¡å™¨å“¦ï¼Œå’±ä»¬éœ€è¦å°†ä»–ç”¨ç”Ÿäº§æ¨¡å¼è¿›è¡Œæ‰“åŒ…

### ç›®æ ‡:

1. é…ç½®æ‰“åŒ…å‘½ä»¤ï¼Œå¹¶æ‰“åŒ…ä»£ç 
2. å‘å¸ƒåˆ°çº¿ä¸Šï¼Ÿ





### æ­¥éª¤ï¼š

1. `package.json`ä¸­å¢åŠ æ‰“åŒ…å‘½ä»¤

   1. `--mode`ï¼Œè®¾ç½®æ¨¡å¼ä¸º`production`,ç”Ÿäº§ç¯å¢ƒ

   ```json
     "scripts": {
       "dev": "webpack --config webpack.config.js",
       "watch": "webpack watch --config webpack.config.js",
       "build": "webpack  --config webpack.config.js --mode production",
       "serve": "webpack serve --config webpack.config.js"
     },
   ```

2. æ‰§è¡Œæ‰“åŒ…å‘½ä»¤

3. è§‚å¯Ÿ`/dist`ç›®å½•



### è¯´æ˜ï¼š

1. ä¸Šçº¿çš„ä»£ç éœ€è¦ç»è¿‡å‹ç¼©ï¼Œåˆå¹¶ç­‰æ“ä½œ
2. ä¹‹å‰çš„å„é¡¹é…ç½®ï¼Œæ˜¯ä¸ºäº†æ­å»ºè‡ªåŠ¨åŒ–çš„å¼€å‘ç¯å¢ƒ
3. è¿™ä¸€èŠ‚æœ€åçš„æ“ä½œå°±æ˜¯é¡¹ç›®å¼€å‘å®Œæ¯•ä¹‹åçš„æ‰“åŒ…æ“ä½œ
4. `/dist`
   1. ç›®å½•å°±æ˜¯å’±ä»¬æ‰“åŒ…ä¹‹åçš„ç»“æœ
   2. å‘å¸ƒä¸Šçº¿ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸€ä»½ä»£ç 





### å°ç»“ï¼š

1. `mode:production`ä¹Ÿå¯ä»¥å«ä»€ä¹ˆç¯å¢ƒï¼Ÿ
2. æ‰“åŒ…ä¹‹åçš„ä»£ç åœ¨å“ªä¸ªç›®å½•ï¼Ÿå¯ä»¥è°ƒæ•´å—ï¼Ÿ











## source map

> ä»£ç æ‰“åŒ…ä¹‹åæ–‡ä»¶å°äº†ä¸å°‘ï¼Œå¦‚æœæŠ¥é”™äº†å¥½ä¸å¥½è°ƒè¯•å‘¢ï¼Ÿ
>
> [ä¼ é€é—¨:ä½¿ç”¨source map](https://www.webpackjs.com/guides/development/#%E4%BD%BF%E7%94%A8-source-map)
>
> [ä¼ é€é—¨:source mapä»‹ç»](https://blog.teamtreehouse.com/introduction-source-maps)

### ç›®æ ‡ï¼š

1. äº†è§£`source map`çš„ä½œç”¨
2. äº†è§£ä»€ä¹ˆæ—¶å€™éœ€è¦ç§»é™¤`source map`



### æ¦‚å¿µ: 

1. `Source Map` å°±æ˜¯ä¸€ä¸ªä¿¡æ¯æ–‡ä»¶ï¼Œé‡Œé¢å‚¨å­˜ç€ä½ç½®ä¿¡æ¯ã€‚å­˜å‚¨ç€å‹ç¼©æ··æ·†åçš„ä»£ç ï¼Œæ‰€å¯¹åº”çš„`è½¬æ¢å‰`çš„ä½ç½®ã€‚
2. æœ‰äº†å®ƒï¼Œå‡ºé”™çš„æ—¶å€™ï¼Œé™¤é”™å·¥å…·å°†ç›´æ¥æ˜¾ç¤ºåŸå§‹ä»£ç ï¼Œè€Œä¸æ˜¯è½¬æ¢åçš„ä»£ç ï¼Œèƒ½å¤Ÿæå¤§çš„æ–¹ä¾¿åæœŸçš„è°ƒè¯•ã€‚





### æµ‹è¯•:

1. `/src/index.js`å†™ä¸€äº›é”™è¯¯çš„ä»£ç :æ¯”å¦‚:

   ```javascript
   // ä½¿ç”¨ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡
   console.log(kissgoodbye)
   ```

2. æ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼Œå¹¶è¿è¡Œä»£ç ï¼Œçœ‹èƒ½å¦å®šä½åˆ°æŠ¥é”™çš„ä½ç½®ï¼Œ`/(ã„’oã„’)/~~`

![image-20220327160900033](https://gitee.com/westblueflower/imgs/raw/master/img/202204011635776.png)





### é…ç½®Source Map

1. **å¼€å‘ç¯å¢ƒ**
   - æ¨èåœ¨ `webpack.config.js` ä¸­æ·»åŠ å¦‚ä¸‹çš„é…ç½®ï¼Œå³å¯ä¿è¯è¿è¡Œæ—¶æŠ¥é”™çš„è¡Œæ•°ä¸æºä»£ç çš„è¡Œæ•° ä¿æŒä¸€è‡´ï¼š

```js
module.exports = {
  // source-map ä»…é™åœ¨å¼€å‘æ¨¡å¼ä¸­ä½¿ç”¨
  //ï¼ˆå¼€å‘ä¸­ï¼Œç¨‹åºå‘˜éœ€è¦æ’é”™ï¼Œéœ€è¦å‡†ç¡®çš„å®šä½é”™è¯¯è¡Œå·ï¼‰
  devtool: 'source-map',
}
```

2. **ç”Ÿäº§ç¯å¢ƒ**
   - é¡¹ç›®å¼€å‘å®Œæ¯•æ—¶ï¼Œå‘å¸ƒä¸Šçº¿éœ€è¦ç§»é™¤`source-map`ï¼Œé¿å…æºç æ³„éœ²

```js
module.exports = {
  // source-map ä»…é™åœ¨å¼€å‘æ¨¡å¼ä¸­ä½¿ç”¨
  //ï¼ˆç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬ä¸å¸Œæœ›åˆ«äººçœ‹åˆ°æˆ‘ä»¬çš„æºç ï¼Œå…³æ‰è¯¥é…ç½®å³å¯ï¼‰ 
  //ï¼ˆå¼€å‘ä¸­ï¼Œç¨‹åºå‘˜éœ€è¦æ’é”™ï¼Œéœ€è¦å‡†ç¡®çš„å®šä½é”™è¯¯è¡Œå·ï¼‰
  // devtool: 'source-map',
}
```





### å°ç»“:

1. å¼€å‘æ—¶å¯ä»¥é€šè¿‡`source map`å¿«é€Ÿæ’é”™ï¼Œä»£ç å‘å¸ƒä¸Šçº¿æ—¶æ˜¯å¦éœ€è¦ä¿ç•™è¯¥æ–‡ä»¶ï¼Ÿ



































